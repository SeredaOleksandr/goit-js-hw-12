{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const perPage = 15;\nconst API_KEY = '44242951-779ddab31bb84492c2ee50b34';\n\nconst userGallery = async (userSearch, myPage) => {\n  const response = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: userSearch,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: perPage,\n      page: myPage,\n    },\n  });\n\n  return response.data;\n};\n\nexport default userGallery;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nconst gallery = document.querySelector('.gallery');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst addImages = response => {\n  const galleryList = response.hits\n    .map(image => {\n      return `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=${image.largeImageURL}>\n                <img\n                    src=${image.webformatURL}\n                    alt=${image.tags}\n                />\n            </a>\n                 <div>\n                <p><span>Likes</span> ${image.likes}</p>\n                <p><span>Views</span> ${image.views}</p>\n                <p><span>Comments</span> ${image.comments}</p>\n                <p><span>Downloads</span> ${image.downloads}</p>\n            </div>\n                </li>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', galleryList);\n  lightbox.refresh();\n};\nexport default addImages;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport userGallery from './js/pixabay-api';\nimport addImages from './js/render-functions';\nimport { perPage } from './js/pixabay-api';\n\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nlet myPage = 1;\nlet userSearch;\n\niziToast.settings({\n  progressBar: false,\n  timeout: 4000,\n  resetOnHover: true,\n  icon: 'material-icons',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  position: 'topRight',\n});\n\nconst showLoader = () => loader.classList.remove('is-hidden');\nconst hideLoader = () => loader.classList.add('is-hidden');\nconst showBtn = () => loadMoreBtn.classList.remove('is-hidden');\nconst hideBtn = () => loadMoreBtn.classList.add('is-hidden');\n\nconst onSubmit = async event => {\n  event.preventDefault();\n  userSearch = event.target.elements.search.value.trim();\n  if (!userSearch) return;\n  showLoader();\n  hideBtn();\n  gallery.innerHTML = '';\n\n  try {\n    myPage = 1;\n    const response = await userGallery(userSearch, myPage);\n    if (response.hits.length === 0) {\n      hideBtn();\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      addImages(response);\n      if (response.totalHits > perPage) {\n        showBtn();\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `Error: ${error.message}`,\n    });\n  } finally {\n    event.target.reset();\n    hideLoader();\n  }\n};\n\nconst onClick = async () => {\n  myPage += 1;\n\n  try {\n    const response = await userGallery(userSearch, myPage);\n    const totalPages = Math.ceil(response.totalHits / perPage);\n\n    showLoader();\n    addImages(response);\n    scroll();\n\n    if (myPage >= totalPages) {\n      hideBtn();\n      iziToast.error({\n        position: 'topRight',\n        message: \"We're sorry, there are no more posts to load\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: `Error: ${error.message}`,\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onClick);\n\nconst scroll = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n};\n"],"names":["axios","perPage","API_KEY","userGallery","userSearch","myPage","gallery","lightbox","SimpleLightbox","addImages","response","galleryList","image","form","loader","loadMoreBtn","iziToast","showLoader","hideLoader","showBtn","hideBtn","onSubmit","event","error","onClick","totalPages","scroll","galleryItem","itemHeight"],"mappings":"owBACAA,EAAM,SAAS,QAAU,2BAElB,MAAMC,EAAU,GACjBC,EAAU,qCAEVC,EAAc,MAAOC,EAAYC,KACpB,MAAML,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAKE,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUH,EACV,KAAMI,CACP,CACL,CAAG,GAEe,KCjBZC,EAAU,SAAS,cAAc,UAAU,EAEjD,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAED,MAAMC,EAAYC,GAAY,CAC5B,MAAMC,EAAcD,EAAS,KAC1B,IAAIE,GACI;AAAA,2CAC8BA,EAAM,aAAa;AAAA;AAAA,0BAEpCA,EAAM,YAAY;AAAA,0BAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,wCAIIA,EAAM,KAAK;AAAA,wCACXA,EAAM,KAAK;AAAA,2CACRA,EAAM,QAAQ;AAAA,4CACbA,EAAM,SAAS;AAAA;AAAA,sBAGtD,EACA,KAAK,EAAE,EACVN,EAAQ,mBAAmB,YAAaK,CAAW,EACnDJ,EAAS,QAAO,CAClB,ECvBMM,EAAO,SAAS,cAAc,MAAM,EACpCP,EAAU,SAAS,cAAc,UAAU,EAC3CQ,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,eAAe,EAC1D,IAAIV,EAAS,EACTD,EAEJY,EAAS,SAAS,CAChB,YAAa,GACb,QAAS,IACT,aAAc,GACd,KAAM,iBACN,aAAc,UACd,cAAe,WACf,SAAU,UACZ,CAAC,EAED,MAAMC,EAAa,IAAMH,EAAO,UAAU,OAAO,WAAW,EACtDI,EAAa,IAAMJ,EAAO,UAAU,IAAI,WAAW,EACnDK,EAAU,IAAMJ,EAAY,UAAU,OAAO,WAAW,EACxDK,EAAU,IAAML,EAAY,UAAU,IAAI,WAAW,EAErDM,EAAW,MAAMC,GAAS,CAG9B,GAFAA,EAAM,eAAc,EACpBlB,EAAakB,EAAM,OAAO,SAAS,OAAO,MAAM,OAC5C,EAAClB,EACL,CAAAa,IACAG,IACAd,EAAQ,UAAY,GAEpB,GAAI,CACFD,EAAS,EACT,MAAMK,EAAW,MAAMP,EAAYC,EAAYC,CAAM,EACjDK,EAAS,KAAK,SAAW,GAC3BU,IACAJ,EAAS,KAAK,CACZ,QACE,0EACV,CAAO,IAEDP,EAAUC,CAAQ,EACdA,EAAS,UAAYT,GACvBkB,IAGL,OAAQI,EAAO,CACdP,EAAS,MAAM,CACb,QAAS,UAAUO,EAAM,OAAO,EACtC,CAAK,CACL,QAAY,CACRD,EAAM,OAAO,QACbJ,GACD,EACH,EAEMM,EAAU,SAAY,CAC1BnB,GAAU,EAEV,GAAI,CACF,MAAMK,EAAW,MAAMP,EAAYC,EAAYC,CAAM,EAC/CoB,EAAa,KAAK,KAAKf,EAAS,UAAYT,CAAO,EAEzDgB,IACAR,EAAUC,CAAQ,EAClBgB,IAEIrB,GAAUoB,IACZL,IACAJ,EAAS,MAAM,CACb,SAAU,WACV,QAAS,8CACjB,CAAO,EAEJ,OAAQO,EAAO,CACdP,EAAS,MAAM,CACb,QAAS,UAAUO,EAAM,OAAO,EACtC,CAAK,CACL,QAAY,CACRL,GACD,CACH,EAEAL,EAAK,iBAAiB,SAAUQ,CAAQ,EACxCN,EAAY,iBAAiB,QAASS,CAAO,EAE7C,MAAME,EAAS,IAAM,CACnB,MAAMC,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACf,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OACvD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAChB,CAAK,CACF,CACH"}